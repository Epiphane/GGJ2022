---
id: lag72
name: Game, State, Entity
file_version: 1.0.2
app_version: 0.7.2-0
file_blobs:
  lib/juicy.ts: 7605e86817fad3f8f7ce0123a66ada55891a9fb3
---

**Game**, **State**, and **Entity+Components** encapsulates pretty much everything in JuicyJS.

The **Game** is the core of everything. There's only 1 instance of the Game class. It owns the canvas, and handles stuff like keypresses, and making sure the update and render loop happen every frame.

The **Game** has multiple **State**s, but only 1 State runs its update and render loop at any given time.

A **State** has multiple **Entities**. The main function of the State is to loop through all its Entities and ask them to update/render.

An **Entity** has multiple **Components**. The **Components** are the things that actually do logic and render stuff to the canvas.

For example, in the **Game** singleton there might be a **LoadingScreen** State. That State might have a **TextEntity** entity, that has a **TextComponent**. That TextComponent would have its **TextInfo.text** set to something like **"Loading..."**, which would draw the text "Loading..." to the canvas.

Next, we'll dive into the code of **Game**, **State**, **Entity**, and **Component**.

# Game

There is only 1 instance of the Game class at a time in Juicy.

<br/>

It's instantiated here. It lives in `window.__juicy__game`.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ lib/juicy.ts
```typescript
â¬œ 399    // Game singleton
â¬œ 400    let game: Game;
â¬œ 401    if ((window as any).__juicy__game) {
â¬œ 402        game = (window as any).__juicy__game as Game;
â¬œ 403    }
â¬œ 404    else {
ðŸŸ© 405        game = (window as any).__juicy__game = new Game();
â¬œ 406    }
â¬œ 407    export { game as Game };
â¬œ 408    
```

<br/>

The Game runs the overall update and render loop. More information can be found at [Game Update and Render Loop](game-update-and-render-loop.c1ivy.sw.md)

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBR0dKMjAyMiUzQSUzQUVwaXBoYW5l/docs/lag72).